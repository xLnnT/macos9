<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mac OS 9</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    width: 100vw;
    height: 100vh;
    background: #111;
    overflow: hidden;
  }

  .screen {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: #000;
  }

  .screen iframe {
    width: 100%;
    height: 100%;
    border: none;
    display: block;
  }

  /* Glass bulge layer */
  .screen-glass {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 12;
    background:
      radial-gradient(
        ellipse 60% 50% at 30% 25%,
        rgba(255, 255, 255, 0.09) 0%,
        transparent 60%
      ),
      radial-gradient(
        ellipse 40% 30% at 70% 75%,
        rgba(255, 255, 255, 0.03) 0%,
        transparent 50%
      );
  }

  /* CRT screen curvature & reflections */
  .screen::after {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
      radial-gradient(
        ellipse 120% 120% at 50% 50%,
        transparent 60%,
        rgba(0, 0, 0, 0.15) 100%
      ),
      linear-gradient(
        160deg,
        rgba(255, 255, 255, 0.06) 0%,
        transparent 40%
      );
    box-shadow: inset 0 0 60px rgba(0, 0, 0, 0.3);
    z-index: 10;
  }

  /* Scanline overlay */
  .screen::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.04) 2px,
      rgba(0, 0, 0, 0.04) 4px
    );
    z-index: 11;
  }
</style>
</head>
<body>
  <div class="screen">
    <iframe id="os9" src="index.html?v=fba61fb" title="Mac OS 9"></iframe>
    <div class="screen-glass"></div>
  </div>
  <script>
    document.getElementById('os9').addEventListener('load', function() {
      var doc = this.contentDocument;
      var bw = doc.getElementById('browser-window');
      if (bw) {
        bw.style.width = '27.5%';
        bw.style.height = '85%';
        bw.style.left = '5%';
        bw.style.top = '24px';
      }

      // Hide finder window on load
      var fw = doc.getElementById('finder-window');
      if (fw) {
        fw.classList.add('hidden');
      }

      // Add "Return to Main Site" icon
      var desktop = doc.getElementById('desktop') || doc.querySelector('.desktop');
      if (!desktop) desktop = doc.body;
      var returnIcon = doc.createElement('div');
      returnIcon.className = 'desktop-icon';
      returnIcon.style.cssText = 'position:absolute;left:20px;top:40px;z-index:5;';
      returnIcon.innerHTML =
        '<div class="icon-img">' +
          '<svg viewBox="0 0 48 48" style="width:48px;height:48px">' +
            '<circle cx="24" cy="24" r="20" fill="#4488DD" stroke="#333" stroke-width="1"/>' +
            '<circle cx="24" cy="24" r="20" fill="none" stroke="#333" stroke-width="1"/>' +
            '<ellipse cx="24" cy="24" rx="10" ry="20" fill="none" stroke="#2266AA" stroke-width="0.8"/>' +
            '<line x1="4" y1="24" x2="44" y2="24" stroke="#2266AA" stroke-width="0.8"/>' +
            '<ellipse cx="24" cy="16" rx="17" ry="4" fill="none" stroke="#2266AA" stroke-width="0.6"/>' +
            '<ellipse cx="24" cy="32" rx="17" ry="4" fill="none" stroke="#2266AA" stroke-width="0.6"/>' +
            '<path d="M8 10 L16 8 L18 14 L10 16 Z" fill="#4CAF50" opacity="0.7"/>' +
            '<path d="M28 6 L38 8 L36 14 L30 12 Z" fill="#4CAF50" opacity="0.6"/>' +
            '<path d="M6 28 L14 26 L16 34 L8 36 Z" fill="#4CAF50" opacity="0.5"/>' +
            '<path d="M30 30 L40 28 L42 34 L32 36 Z" fill="#4CAF50" opacity="0.5"/>' +
            '<path d="M14 24 L24 16 L24 20 L34 20 L34 28 L24 28 L24 32 Z" fill="#FFF" stroke="#333" stroke-width="0.8" opacity="0.9"/>' +
          '</svg>' +
        '</div>' +
        '<span class="icon-label">Return to Main Site</span>';
      returnIcon.addEventListener('mousedown', function(e) {
        e.stopPropagation();
        var clearFn = doc.defaultView.clearSelections || function() {
          doc.querySelectorAll('.desktop-icon, .folder-icon').forEach(function(el) {
            el.classList.remove('selected');
          });
        };
        clearFn();
        returnIcon.classList.add('selected');
      });
      returnIcon.addEventListener('dblclick', function() {
        window.top.location.href = 'https://www.doodseskader.com/';
      });
      desktop.appendChild(returnIcon);

      // Replace marketplace listings (keep vase, replace the rest)
      var listingsView = doc.getElementById('mkt-listings-view');
      if (listingsView) {
        var allListings = listingsView.querySelectorAll('.mkt-listing');
        for (var i = 0; i < allListings.length; i++) {
          if (allListings[i].id !== 'mkt-vase-listing') {
            allListings[i].remove();
          }
        }

        var products = [
          { title: 'The Change Is Me Vinyl Preorder Exclusive', url: 'https://www.doodseskader.com/product-page/the-change-is-me-vinyl-preorder-exclusive', img: 'prod_vinyl_preorder.png', cat: 'Music > Vinyl' },
          { title: 'No Laughter Left in Me Hoodie in Black', url: 'https://www.doodseskader.com/product-page/no-laughter-left-in-me-hoodie-in-black', img: 'prod_hoodie_black.png', cat: 'Apparel > Hoodies' },
          { title: 'The Change Is Me Crewneck in Ice Blue', url: 'https://www.doodseskader.com/product-page/the-change-is-me-crewneck-in-ice-blue', img: 'prod_crewneck_blue.png', cat: 'Apparel > Crewnecks' },
          { title: 'The Change Is Me Vinyl', url: 'https://www.doodseskader.com/product-page/the-change-is-me-vinyl', img: 'prod_vinyl.png', cat: 'Music > Vinyl' },
          { title: 'Stuck in the Dark T-Shirt in Stone Washed Black', url: 'https://www.doodseskader.com/product-page/stuck-in-the-dark-t-shirt-in-stone-washed-black', img: 'prod_tee_stonewash.png', cat: 'Apparel > T-Shirts' },
          { title: 'The Change Is Me T-Shirt in Off-White', url: 'https://www.doodseskader.com/product-page/the-change-is-me-t-shirt-in-off-white', img: 'prod_tee_offwhite.png', cat: 'Apparel > T-Shirts' },
          { title: 'The Change Is Me CD', url: 'https://www.doodseskader.com/product-page/the-change-is-me-cd', img: 'prod_cd.png', cat: 'Music > CDs' },
          { title: 'Doodseskader Embroidered Beanie', url: 'https://www.doodseskader.com/product-page/doodseskader-embroidered-beanie', img: 'prod_beanie.png', cat: 'Apparel > Accessories' },
          { title: 'Doodseskader Embroidered Patch', url: 'https://www.doodseskader.com/product-page/doodseskader-embroidered-patch', img: 'prod_patch.png', cat: 'Apparel > Accessories' },
          { title: 'Doodseskader Enamel Pin', url: 'https://www.doodseskader.com/product-page/doodseskader-enamel-pin', img: 'prod_pin.png', cat: 'Apparel > Accessories' },
          { title: 'Bend Until I\'d Break T-Shirt in Black', url: 'https://www.doodseskader.com/product-page/bend-until-i-d-break-t-shirt-in-black', img: 'prod_tee_black.png', cat: 'Apparel > T-Shirts' }
        ];

        var bottomBar = listingsView.querySelector('.mkt-bottom-bar');
        for (var i = 0; i < products.length; i++) {
          var p = products[i];
          var div = doc.createElement('div');
          div.className = 'mkt-listing';
          div.innerHTML = '<table cellpadding="0" cellspacing="0" border="0"><tr>' +
            '<td class="mkt-listing-img"><img src="' + p.img + '" alt="' + p.title + '" style="width:48px;height:48px;border:1px solid #999;object-fit:cover"></td>' +
            '<td class="mkt-listing-info"><div class="mkt-listing-title"><a href="' + p.url + '" target="_blank">' + p.title + '</a></div>' +
            '<div class="mkt-listing-meta">' + p.cat + '</div>' +
            '<div class="mkt-seller">Seller: <a href="https://www.doodseskader.com" target="_blank">Doodseskader</a> <span class="mkt-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</span></div></td>' +
            '<td class="mkt-listing-price"><div style="margin-top:3px"><a href="' + p.url + '" target="_blank" style="font-family:Verdana,sans-serif;font-size:8px;background:#006;color:#fff;padding:2px 8px;text-decoration:none;font-weight:bold">View Item</a></div></td>' +
            '</tr></table>';
          if (bottomBar) {
            listingsView.insertBefore(div, bottomBar);
          } else {
            listingsView.appendChild(div);
          }
        }

        // Update item count
        var countSpan = listingsView.querySelector('span[style]');
        if (countSpan && countSpan.textContent.indexOf('showing') !== -1) {
          countSpan.textContent = '(showing 1-12 of 12)';
        }

        // Update bottom bar
        if (bottomBar) {
          bottomBar.innerHTML = 'Page: <b>1</b>';
        }
      }
    });
  </script>
</body>
</html>
