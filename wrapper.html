<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mac OS 9</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    width: 100vw;
    height: 100vh;
    background: #111;
    overflow: hidden;
  }

  .screen {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: #000;
  }

  .screen iframe {
    width: 100%;
    height: 100%;
    border: none;
    display: block;
  }

  /* Glass bulge layer */
  .screen-glass {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 12;
    background:
      radial-gradient(
        ellipse 60% 50% at 30% 25%,
        rgba(255, 255, 255, 0.09) 0%,
        transparent 60%
      ),
      radial-gradient(
        ellipse 40% 30% at 70% 75%,
        rgba(255, 255, 255, 0.03) 0%,
        transparent 50%
      );
  }

  /* CRT screen curvature & reflections */
  .screen::after {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
      radial-gradient(
        ellipse 120% 120% at 50% 50%,
        transparent 60%,
        rgba(0, 0, 0, 0.15) 100%
      ),
      linear-gradient(
        160deg,
        rgba(255, 255, 255, 0.06) 0%,
        transparent 40%
      );
    box-shadow: inset 0 0 60px rgba(0, 0, 0, 0.3);
    z-index: 10;
  }

  /* Scanline overlay */
  .screen::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.04) 2px,
      rgba(0, 0, 0, 0.04) 4px
    );
    z-index: 11;
  }
</style>
</head>
<body>
  <div class="screen">
    <iframe id="os9" src="index.html?v=fba61fb" title="Mac OS 9"></iframe>
    <div class="screen-glass"></div>
  </div>
  <script>
    document.getElementById('os9').addEventListener('load', function() {
      var doc = this.contentDocument;
      var bw = doc.getElementById('browser-window');
      if (bw) {
        bw.style.width = '27.5%';
        bw.style.height = '85%';
        bw.style.left = '5%';
        bw.style.top = '24px';
      }

      // Hide finder window on load
      var fw = doc.getElementById('finder-window');
      if (fw) {
        fw.classList.add('hidden');
      }

      // Add "Return to Main Site" folder icon
      var desktop = doc.getElementById('desktop') || doc.querySelector('.desktop');
      if (!desktop) desktop = doc.body;
      var folderIcon = doc.createElement('div');
      folderIcon.className = 'desktop-icon';
      folderIcon.style.cssText = 'position:absolute;left:20px;top:40px;cursor:pointer;z-index:5;';
      folderIcon.innerHTML =
        '<div class="icon-img">' +
          '<svg viewBox="0 0 40 32" class="svg-folder" style="width:40px;height:32px">' +
            '<path d="M2 6 L16 6 L18 2 L2 2 Z" fill="#8888DD" stroke="#555" stroke-width="0.5"/>' +
            '<rect x="2" y="6" width="36" height="24" rx="2" fill="#9999EE" stroke="#555" stroke-width="0.5"/>' +
            '<rect x="4" y="8" width="32" height="20" rx="1" fill="#AAAAFF"/>' +
          '</svg>' +
        '</div>' +
        '<span class="icon-label" style="display:block;text-align:center;font-family:Geneva,Verdana,sans-serif;font-size:9px;color:#FFF;margin-top:2px;text-shadow:1px 1px 0 #000;">Return to Main Site</span>';
      folderIcon.addEventListener('dblclick', function() {
        window.top.location.href = 'https://www.doodseskader.com/';
      });
      desktop.appendChild(folderIcon);

      // Replace marketplace listings (keep vase, replace the rest)
      var listingsView = doc.getElementById('mkt-listings-view');
      if (listingsView) {
        var allListings = listingsView.querySelectorAll('.mkt-listing');
        for (var i = 0; i < allListings.length; i++) {
          if (allListings[i].id !== 'mkt-vase-listing') {
            allListings[i].remove();
          }
        }

        var products = [
          { title: 'The Change Is Me Vinyl Preorder Exclusive', url: 'https://www.doodseskader.com/product-page/the-change-is-me-vinyl-preorder-exclusive', img: 'prod_vinyl_preorder.png', cat: 'Music > Vinyl' },
          { title: 'No Laughter Left in Me Hoodie in Black', url: 'https://www.doodseskader.com/product-page/no-laughter-left-in-me-hoodie-in-black', img: 'prod_hoodie_black.png', cat: 'Apparel > Hoodies' },
          { title: 'The Change Is Me Crewneck in Ice Blue', url: 'https://www.doodseskader.com/product-page/the-change-is-me-crewneck-in-ice-blue', img: 'prod_crewneck_blue.png', cat: 'Apparel > Crewnecks' },
          { title: 'The Change Is Me Vinyl', url: 'https://www.doodseskader.com/product-page/the-change-is-me-vinyl', img: 'prod_vinyl.png', cat: 'Music > Vinyl' },
          { title: 'Stuck in the Dark T-Shirt in Stone Washed Black', url: 'https://www.doodseskader.com/product-page/stuck-in-the-dark-t-shirt-in-stone-washed-black', img: 'prod_tee_stonewash.png', cat: 'Apparel > T-Shirts' },
          { title: 'The Change Is Me T-Shirt in Off-White', url: 'https://www.doodseskader.com/product-page/the-change-is-me-t-shirt-in-off-white', img: 'prod_tee_offwhite.png', cat: 'Apparel > T-Shirts' },
          { title: 'The Change Is Me CD', url: 'https://www.doodseskader.com/product-page/the-change-is-me-cd', img: 'prod_cd.png', cat: 'Music > CDs' },
          { title: 'Doodseskader Embroidered Beanie', url: 'https://www.doodseskader.com/product-page/doodseskader-embroidered-beanie', img: 'prod_beanie.png', cat: 'Apparel > Accessories' },
          { title: 'Doodseskader Embroidered Patch', url: 'https://www.doodseskader.com/product-page/doodseskader-embroidered-patch', img: 'prod_patch.png', cat: 'Apparel > Accessories' },
          { title: 'Doodseskader Enamel Pin', url: 'https://www.doodseskader.com/product-page/doodseskader-enamel-pin', img: 'prod_pin.png', cat: 'Apparel > Accessories' },
          { title: 'Bend Until I\'d Break T-Shirt in Black', url: 'https://www.doodseskader.com/product-page/bend-until-i-d-break-t-shirt-in-black', img: 'prod_tee_black.png', cat: 'Apparel > T-Shirts' }
        ];

        var bottomBar = listingsView.querySelector('.mkt-bottom-bar');
        for (var i = 0; i < products.length; i++) {
          var p = products[i];
          var div = doc.createElement('div');
          div.className = 'mkt-listing';
          div.innerHTML = '<table cellpadding="0" cellspacing="0" border="0"><tr>' +
            '<td class="mkt-listing-img"><img src="' + p.img + '" alt="' + p.title + '" style="width:48px;height:48px;border:1px solid #999;object-fit:cover"></td>' +
            '<td class="mkt-listing-info"><div class="mkt-listing-title"><a href="' + p.url + '" target="_blank">' + p.title + '</a></div>' +
            '<div class="mkt-listing-meta">' + p.cat + '</div>' +
            '<div class="mkt-seller">Seller: <a href="https://www.doodseskader.com" target="_blank">Doodseskader</a> <span class="mkt-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</span></div></td>' +
            '<td class="mkt-listing-price"><div style="margin-top:3px"><a href="' + p.url + '" target="_blank" style="font-family:Verdana,sans-serif;font-size:8px;background:#006;color:#fff;padding:2px 8px;text-decoration:none;font-weight:bold">View Item</a></div></td>' +
            '</tr></table>';
          if (bottomBar) {
            listingsView.insertBefore(div, bottomBar);
          } else {
            listingsView.appendChild(div);
          }
        }

        // Update item count
        var countSpan = listingsView.querySelector('span[style]');
        if (countSpan && countSpan.textContent.indexOf('showing') !== -1) {
          countSpan.textContent = '(showing 1-12 of 12)';
        }

        // Update bottom bar
        if (bottomBar) {
          bottomBar.innerHTML = 'Page: <b>1</b>';
        }
      }
    });
  </script>
</body>
</html>
